# This yaml file is used to define the tasks and configuration of
# a Gen 3 pipeline used for testing in ts_wep.
description: wep basic processing test pipeline
# Here we specify the corresponding instrument for the data we
# will be using.
instrument: lsst.obs.lsst.LsstCam
# Then we can specify each task in our pipeline by a name
# and then specify the class name corresponding to that task
tasks:
  isr:
    class: lsst.ip.isr.isrTask.IsrTask
    # Below we specify the configuration settings we want to use
    # when running the task in this pipeline. Since our data doesn't
    # include bias or flats we only want to use doApplyGains and
    # doOverscan in our isr task.
    config:
      connections.outputExposure: 'postISRCCD'
      doBias: False
      doVariance: False
      doLinearize: False
      doCrosstalk: False
      doDefect: False
      doNanMasking: False
      doInterpolate: False
      doBrighterFatter: False
      doDark: False
      doFlat: False
      doApplyGains: True
      doFringe: False
      doOverscan: True
      python: OverscanCorrectionTask.ConfigClass.fitType = 'MEDIAN'
  generateDonutCatalogWcsTask:
    class: lsst.ts.wep.task.GenerateDonutCatalogWcsTask.GenerateDonutCatalogWcsTask
    config:
      donutSelector.fluxField: 'g_flux'
      donutSelector.unblendedSeparation: 1
  estimateZernikesCwfsTask:
    class: lsst.ts.wep.task.EstimateZernikesCwfsTask.EstimateZernikesCwfsTask
    config:
      # And here we specify the configuration settings originally defined in
      # EstimateZernikesCwfsTaskConfig.
      donutTemplateSize: 160
      donutStampSize: 160
      initialCutoutPadding: 40
      # Obscuration (inner_radius / outer_radius of M1M3)
      instObscuration: 0.61
      # Focal length in m
      instFocalLength: 10.312
      # Aperture diameter in m
      instApertureDiameter: 8.36
      # Defocal distance offset in mm
      # Bo Xin used the offset of 1.5225 mm to get the parameters used for 1.5 mm in ZEMAX
      instDefocalOffset: 1.5225
      # Camera pixel size in m
      instPixelSize: 10.0e-6
